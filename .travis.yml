language: go
sudo: false
before_install:
      - go get github.com/mattn/goveralls

install:
  - go get github.com/andybons/hipchat
  - go get golang.org/x/net/websocket
  - go get golang.org/x/tools/cmd/cover
  - go get github.com/mattn/goveralls
  - go get -d -v ./...

script:
  - go test -v -covermode=count -coverprofile=profile.cov
  - $(go env GOPATH | awk 'BEGIN{FS=":"} {print $1}')/bin/goveralls -coverprofile=profile.cov -service=travis-ci -repotoken $COVERALLS_TOKEN

env:
  global:
    secure: aUXQRF2T2niMRT6+dY7RzWkazezbfReMB0idbZUZ9K6QZEzSFk7Paa8xiDSAn4oE/kUJ/q+knkr2RevmhWOU/BBB1iJn3OZsIb4lzRANoOoUUV+b6ZNOI5NohPqf23vOOevQr47W9WOchDVq3M8tTP7MAt62k5uiic/BlaF+ThxYHjm85NsK7mk6WihBoJMti09QScKLj52b3JkJ8MCullTHQ8gXMJUDSNuh9ddxT1C0fqIb63t67H0DwIb0JjCkOQ7MbrZKQGDECl23YPakK7upAtgJdOil4ZLcWTfLFBfFifwnzwVxoV87QBERN96IFV82TtqQquNvLglMdkSmzZlSft9KIQjWc0nXT25+A+bY9uiapoyAHs1K8Mg4fcZxKQOH0M/NffBcbwZK8DTneRfzG0kH8HEfqIKckXdOUc9hWYOPtaJ935kiMTxjez6BXFm+CWQiNJITq0NzLdxcpqLI7FJLjPCaL2BYE8fRUnfUqkhjUeXwg6qa8QC2UjQItZMKRjSkoYgbGVATx18a3RVZm2UPi4fiqV+GpOXrap8T95hmovCTqxO85DwpUvrtf8qdoB8wmHmVl0osMbEZR74MXEta9C1G0mPRppUrRkZAFREOB6fC1pGBga6IJ8z8WBzO3d1iuPm3SqddoUyIxAc8qg+6HIUkScIc2AEWUvk=
after_success:
  - goveralls -coverprofile=profile.cov -service=travis-ci

notifications:
  email: true
