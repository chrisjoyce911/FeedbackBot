language: go
sudo: false
before_install:
      - go get github.com/mattn/goveralls

install:
  - go get github.com/andybons/hipchat
  - go get golang.org/x/net/websocket
  - go get golang.org/x/tools/cmd/cover
  - go get github.com/mattn/goveralls
  - go get -d -v ./...

script:
  - go test -v -covermode=count -coverprofile=profile.cov
  - $(go env GOPATH | awk 'BEGIN{FS=":"} {print $1}')/bin/goveralls -coverprofile=profile.cov -service=travis-ci -repotoken $COVERALLS_TOKEN

env:
  global:
    secure: ylD5Pxrzltdrz2drKGUVkLrpXMQRhfKnKftMWWAsHrkp4Hp9tHW6OCEyg2Ae7PnIPhC3PdnOWoTCkhlrY5ZxFiMJY/HIP6izOrJLEDTtdU8NiNzK3Hx/OhAjwPJv5ST2c/euE29Nr3dcmOoHYuNCmwMl/10XxmWLcj24rdxF4qbqUeWRVfPvIwwx2JzYuTb7zqFSzKB9I86IC0YE03K4gQI4lCNq/c+mriFoRds7wPWL6BcDqezYSQLBqVhEVwKuoyW+loDBJVPcwTlDp5Wf1j5gNm2NNGZVfRAvngbuASWuZEWou1xkqHnKYjX+uun8OwQ68/jTem13Q6ncmkmqH3YNAhae6nAXlTFMdw/BSxDzn7dGYrIbaMQafteYreNUzu8BXrWMH6X0oMATngpWL6ecbyMtWcC3TIVZ9DUyIH0i92xvoy6nLoWsFoxIFlWzUiUgfvgFHJ+OTJhX+s5yXHORGwFJgu8GAr2ESWFQ+H8rW2fm6daAUG4/1mBgzpUzIv3rwO3VFOBrIS+hxciyg37uZGB9XERyet/2goyWCMxhXzqt0iHYbccthPXFs/D5vU2jx5i3fQVk6BDmo9Q36Do7mgvuPR68Bv701LMkNE61Lk7r3BR9fxoIXw15Nt8l7TR1/2iQ22FIwMabpGaZpclDw8Cg+t6lH/mhaFD5Fug=
    after_success:
  - goveralls -coverprofile=profile.cov -service=travis-ci

notifications:
  email: true
